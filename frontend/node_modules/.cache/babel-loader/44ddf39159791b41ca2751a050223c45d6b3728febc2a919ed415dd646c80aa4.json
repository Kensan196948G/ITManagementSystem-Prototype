{"ast":null,"code":"import React,{useState,useEffect}from'react';import{UsersIcon,ArrowPathIcon,PlusIcon,PencilIcon,TrashIcon,CheckCircleIcon,XCircleIcon,UserPlusIcon,KeyIcon}from'@heroicons/react/24/outline';import{useAuth}from'../contexts/AuthContext';// ユーザーロールのバッジコンポーネント\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RoleBadge=_ref=>{let{role}=_ref;let color='bg-secondary-100 text-secondary-800';if(role==='グローバル管理者'){color='bg-danger-100 text-danger-800';}else if(role==='一般ユーザー'){color='bg-primary-100 text-primary-800';}else if(role==='ゲスト'){color='bg-warning-100 text-warning-800';}return/*#__PURE__*/_jsx(\"span\",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${color}`,children:role});};// ユーザー追加/編集モーダル\nconst UserFormModal=_ref2=>{let{user,onClose,onSubmit}=_ref2;const{user:currentUser}=useAuth();const isEdit=!!user;const[formData,setFormData]=useState({first_name:(user===null||user===void 0?void 0:user.first_name)||'',last_name:(user===null||user===void 0?void 0:user.last_name)||'',email:(user===null||user===void 0?void 0:user.email)||'',role:(user===null||user===void 0?void 0:user.role)||'一般ユーザー',department:(user===null||user===void 0?void 0:user.department)||'',auth_type:(user===null||user===void 0?void 0:user.auth_type)||'ローカル認証'});const[errors,setErrors]=useState({});const[touched,setTouched]=useState({});// 現在のユーザーがグローバル管理者かどうかを判定\nconst isGlobalAdmin=(currentUser===null||currentUser===void 0?void 0:currentUser.role)==='グローバル管理者';const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));setTouched(prev=>({...prev,[name]:true}));};const validateForm=()=>{const newErrors={};// 必須項目のバリデーション\nif(!formData.first_name.trim())newErrors.first_name='名を入力してください';if(!formData.last_name.trim())newErrors.last_name='姓を入力してください';if(!formData.email.trim())newErrors.email='メールアドレスを入力してください';if(!formData.department.trim())newErrors.department='部署を入力してください';setErrors(newErrors);return Object.keys(newErrors).length===0;};// 項目がフォーカスを失った時にバリデーションを実行\nconst handleBlur=e=>{const{name}=e.target;setTouched(prev=>({...prev,[name]:true}));// 個別フィールドのバリデーション\nif(name==='first_name'&&!formData.first_name.trim()){setErrors(prev=>({...prev,first_name:'名を入力してください'}));}else if(name==='last_name'&&!formData.last_name.trim()){setErrors(prev=>({...prev,last_name:'姓を入力してください'}));}else if(name==='email'&&!formData.email.trim()){setErrors(prev=>({...prev,email:'メールアドレスを入力してください'}));}else if(name==='department'&&!formData.department.trim()){setErrors(prev=>({...prev,department:'部署を入力してください'}));}else{// エラーをクリア\nsetErrors(prev=>{const updated={...prev};delete updated[name];return updated;});}};const handleSubmit=e=>{e.preventDefault();// すべてのフィールドをタッチ済みとしてマーク\nconst allTouched=Object.keys(formData).reduce((acc,key)=>{acc[key]=true;return acc;},{});setTouched(allTouched);if(validateForm()){onSubmit({id:(user===null||user===void 0?void 0:user.id)||Math.random().toString(36).substring(2,15),...formData,status:(user===null||user===void 0?void 0:user.status)||'アクティブ',permissions:(user===null||user===void 0?void 0:user.permissions)||['read']});}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-30 overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 transition-opacity\",onClick:onClose,children:/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-secondary-900 opacity-50\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline-block sm:align-middle sm:h-screen\",children:\"\\u200B\"}),/*#__PURE__*/_jsx(\"div\",{className:\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\",onClick:e=>e.stopPropagation(),children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,noValidate:true,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg leading-6 font-medium text-secondary-900\",children:isEdit?'ユーザー編集':'ユーザー追加'}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-secondary-500\",children:isEdit?'ユーザー情報を更新します':'新しいユーザーを追加します'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"last_name\",className:\"block text-sm font-medium text-secondary-700\",children:[\"\\u59D3 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger-600\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"last_name\",id:\"last_name\",value:formData.last_name,onChange:handleChange,onBlur:handleBlur,className:`mt-1 form-input block w-full ${touched.last_name&&errors.last_name?'border-danger-500':''}`,required:true}),touched.last_name&&errors.last_name&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-danger-600\",children:errors.last_name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"first_name\",className:\"block text-sm font-medium text-secondary-700\",children:[\"\\u540D \",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger-600\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"first_name\",id:\"first_name\",value:formData.first_name,onChange:handleChange,onBlur:handleBlur,className:`mt-1 form-input block w-full ${touched.first_name&&errors.first_name?'border-danger-500':''}`,required:true}),touched.first_name&&errors.first_name&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-danger-600\",children:errors.first_name})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-secondary-700\",children:[\"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger-600\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",id:\"email\",value:formData.email,onChange:handleChange,onBlur:handleBlur,className:`mt-1 form-input block w-full ${touched.email&&errors.email?'border-danger-500':''}`,required:true}),touched.email&&errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-danger-600\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"department\",className:\"block text-sm font-medium text-secondary-700\",children:[\"\\u90E8\\u7F72 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger-600\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"department\",id:\"department\",value:formData.department,onChange:handleChange,onBlur:handleBlur,className:`mt-1 form-input block w-full ${touched.department&&errors.department?'border-danger-500':''}`,required:true}),touched.department&&errors.department&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-danger-600\",children:errors.department})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"role\",className:\"block text-sm font-medium text-secondary-700\",children:\"\\u30ED\\u30FC\\u30EB\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"role\",id:\"role\",value:formData.role,onChange:handleChange,className:\"mt-1 form-select block w-full\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u30B0\\u30ED\\u30FC\\u30D0\\u30EB\\u7BA1\\u7406\\u8005\",children:\"\\u30B0\\u30ED\\u30FC\\u30D0\\u30EB\\u7BA1\\u7406\\u8005\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u4E00\\u822C\\u30E6\\u30FC\\u30B6\\u30FC\",children:\"\\u4E00\\u822C\\u30E6\\u30FC\\u30B6\\u30FC\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u30B2\\u30B9\\u30C8\",children:\"\\u30B2\\u30B9\\u30C8\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"auth_type\",className:\"block text-sm font-medium text-secondary-700\",children:\"\\u8A8D\\u8A3C\\u30BF\\u30A4\\u30D7\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"auth_type\",id:\"auth_type\",value:formData.auth_type,onChange:handleChange,className:\"mt-1 form-select block w-full\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u30ED\\u30FC\\u30AB\\u30EB\\u8A8D\\u8A3C\",children:\"\\u30ED\\u30FC\\u30AB\\u30EB\\u8A8D\\u8A3C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u30B7\\u30F3\\u30B0\\u30EB\\u30B5\\u30A4\\u30F3\\u30AA\\u30F3\",children:\"\\u30B7\\u30F3\\u30B0\\u30EB\\u30B5\\u30A4\\u30F3\\u30AA\\u30F3\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-secondary-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary w-full sm:w-auto sm:ml-3\",children:isEdit?'更新':'追加'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn border border-secondary-300 bg-white text-secondary-700 hover:bg-secondary-50 mt-3 sm:mt-0 w-full sm:w-auto\",onClick:onClose,children:\"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"})]})]})})]})});};// 権限設定モーダル\nconst PermissionsModal=_ref3=>{let{user,onClose,onSubmit}=_ref3;const[permissions,setPermissions]=useState(user.permissions||[]);const handlePermissionChange=perm=>{if(permissions.includes(perm)){setPermissions(permissions.filter(p=>p!==perm));}else{setPermissions([...permissions,perm]);}};const handleSubmit=e=>{e.preventDefault();onSubmit({...user,permissions});};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-30 overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 transition-opacity\",onClick:onClose,children:/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-secondary-900 opacity-50\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline-block sm:align-middle sm:h-screen\",children:\"\\u200B\"}),/*#__PURE__*/_jsx(\"div\",{className:\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\",onClick:e=>e.stopPropagation(),children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg leading-6 font-medium text-secondary-900\",children:\"\\u6A29\\u9650\\u8A2D\\u5B9A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-secondary-500\",children:[`${user.last_name} ${user.first_name}`,\"\\u306E\\u6A29\\u9650\\u3092\\u8A2D\\u5B9A\\u3057\\u307E\\u3059\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 border border-secondary-200 rounded-md\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-secondary-900\",children:\"\\u7BA1\\u7406\\u6A29\\u9650\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-secondary-500\",children:\"\\u3059\\u3079\\u3066\\u306E\\u7BA1\\u7406\\u6A5F\\u80FD\\u3078\\u306E\\u30A2\\u30AF\\u30BB\\u30B9\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"admin\",checked:permissions.includes('admin'),onChange:()=>handlePermissionChange('admin'),className:\"form-checkbox h-4 w-4 text-primary-600\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 border border-secondary-200 rounded-md\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-secondary-900\",children:\"\\u8AAD\\u307F\\u53D6\\u308A\\u6A29\\u9650\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-secondary-500\",children:\"\\u30C0\\u30C3\\u30B7\\u30E5\\u30DC\\u30FC\\u30C9\\u3068\\u60C5\\u5831\\u306E\\u95B2\\u89A7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"read\",checked:permissions.includes('read'),onChange:()=>handlePermissionChange('read'),className:\"form-checkbox h-4 w-4 text-primary-600\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 border border-secondary-200 rounded-md\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-secondary-900\",children:\"\\u66F8\\u304D\\u8FBC\\u307F\\u6A29\\u9650\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-secondary-500\",children:\"\\u30C7\\u30FC\\u30BF\\u306E\\u66F4\\u65B0\\u3068\\u5909\\u66F4\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"write\",checked:permissions.includes('write'),onChange:()=>handlePermissionChange('write'),className:\"form-checkbox h-4 w-4 text-primary-600\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 border border-secondary-200 rounded-md\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-secondary-900\",children:\"API\\u7BA1\\u7406\\u6A29\\u9650\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-secondary-500\",children:\"API\\u30D1\\u30FC\\u30DF\\u30C3\\u30B7\\u30E7\\u30F3\\u7BA1\\u7406\\u6A5F\\u80FD\\u3078\\u306E\\u30A2\\u30AF\\u30BB\\u30B9\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"api_management\",checked:permissions.includes('api_management'),onChange:()=>handlePermissionChange('api_management'),className:\"form-checkbox h-4 w-4 text-primary-600\"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-secondary-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary w-full sm:w-auto sm:ml-3\",children:\"\\u4FDD\\u5B58\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn border border-secondary-300 bg-white text-secondary-700 hover:bg-secondary-50 mt-3 sm:mt-0 w-full sm:w-auto\",onClick:onClose,children:\"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"})]})]})})]})});};// 削除確認モーダル\nconst DeleteConfirmModal=_ref4=>{let{user,onClose,onConfirm}=_ref4;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-30 overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 transition-opacity\",onClick:onClose,children:/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-secondary-900 opacity-50\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline-block sm:align-middle sm:h-screen\",children:\"\\u200B\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sm:flex sm:items-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-danger-100 sm:mx-0 sm:h-10 sm:w-10\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-6 w-6 text-danger-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg leading-6 font-medium text-secondary-900\",children:\"\\u30E6\\u30FC\\u30B6\\u30FC\\u306E\\u524A\\u9664\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-secondary-500\",children:`${user.last_name} ${user.first_name} を削除してもよろしいですか？この操作は取り消せません。`})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-secondary-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger w-full sm:w-auto sm:ml-3\",onClick:()=>onConfirm(user.id),children:\"\\u524A\\u9664\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn border border-secondary-300 bg-white text-secondary-700 hover:bg-secondary-50 mt-3 sm:mt-0 w-full sm:w-auto\",onClick:onClose,children:\"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"})]})]})]})});};const UserManagement=()=>{// AuthContextからユーザーロールを取得\nconst{user:currentUser}=useAuth();// モックユーザー一覧（実際のアプリではAPIから取得します）\nconst[users,setUsers]=useState([{id:'1',first_name:'太郎',last_name:'山田',email:'taro.yamada@example.com',role:'グローバル管理者',department:'IT部門',permissions:['admin','read','write','api_management'],status:'アクティブ',auth_type:'ローカル認証'},{id:'2',first_name:'一郎',last_name:'鈴木',email:'ichiro.suzuki@example.com',role:'一般ユーザー',department:'IT部門',permissions:['read','write'],status:'アクティブ',auth_type:'シングルサインオン'},{id:'3',first_name:'次郎',last_name:'佐藤',email:'jiro.sato@example.com',role:'ゲスト',department:'営業部',permissions:['read'],status:'アクティブ',auth_type:'ローカル認証'},{id:'4',first_name:'花子',last_name:'田中',email:'hanako.tanaka@example.com',role:'一般ユーザー',department:'総務部',permissions:['read','write'],status:'無効',auth_type:'シングルサインオン'}]);// 検索とフィルタリング\nconst[searchTerm,setSearchTerm]=useState('');const[roleFilter,setRoleFilter]=useState('all');const[statusFilter,setStatusFilter]=useState('all');// モーダル状態管理\nconst[modalState,setModalState]=useState({type:null,// 'add', 'edit', 'delete', 'permissions'\nuser:null});// フィルタリング適用\nconst filteredUsers=users.filter(user=>{const nameMatch=`${user.last_name}${user.first_name}${user.email}`.toLowerCase().includes(searchTerm.toLowerCase());const roleMatch=roleFilter==='all'||user.role===roleFilter;const statusMatch=statusFilter==='all'||statusFilter==='active'&&user.status==='アクティブ'||statusFilter==='inactive'&&user.status==='無効';return nameMatch&&roleMatch&&statusMatch;});// ユーザー追加/編集の処理\nconst handleUserSubmit=userData=>{if(modalState.type==='add'){setUsers([...users,userData]);}else if(modalState.type==='edit'){setUsers(users.map(u=>u.id===userData.id?userData:u));}setModalState({type:null,user:null});};// 権限設定の保存処理\nconst handlePermissionsSave=userData=>{setUsers(users.map(u=>u.id===userData.id?userData:u));setModalState({type:null,user:null});};// ユーザー削除の処理\nconst handleDeleteUser=userId=>{setUsers(users.filter(u=>u.id!==userId));setModalState({type:null,user:null});};// ユーザー状態の切り替え\nconst toggleUserStatus=userId=>{setUsers(users.map(u=>{if(u.id===userId){return{...u,status:u.status==='アクティブ'?'無効':'アクティブ'};}return u;}));};// アクティブユーザー数を計算\nconst activeUsersCount=users.filter(user=>user.status==='アクティブ').length;// 現在のユーザーがグローバル管理者かどうか\nconst isGlobalAdmin=(currentUser===null||currentUser===void 0?void 0:currentUser.role)==='グローバル管理者';// モーダルの表示\nconst renderModal=()=>{if(!modalState.type)return null;switch(modalState.type){case'add':return/*#__PURE__*/_jsx(UserFormModal,{onClose:()=>setModalState({type:null,user:null}),onSubmit:handleUserSubmit});case'edit':return/*#__PURE__*/_jsx(UserFormModal,{user:modalState.user,onClose:()=>setModalState({type:null,user:null}),onSubmit:handleUserSubmit});case'permissions':return/*#__PURE__*/_jsx(PermissionsModal,{user:modalState.user,onClose:()=>setModalState({type:null,user:null}),onSubmit:handlePermissionsSave});case'delete':return/*#__PURE__*/_jsx(DeleteConfirmModal,{user:modalState.user,onClose:()=>setModalState({type:null,user:null}),onConfirm:handleDeleteUser});default:return null;}};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6 animate-fade-in\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-secondary-900\",children:\"\\u30ED\\u30FC\\u30AB\\u30EB\\u30E6\\u30FC\\u30B6\\u30FC\\u7BA1\\u7406\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-primary-600\",children:[/*#__PURE__*/_jsx(ArrowPathIcon,{className:\"h-5 w-5 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"\\u6700\\u7D42\\u66F4\\u65B0: 2025/03/13 18:25\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row md:items-center md:justify-between space-y-2 md:space-y-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 max-w-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-secondary-400\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u30E6\\u30FC\\u30B6\\u30FC\\u3092\\u691C\\u7D22...\",className:\"form-input pl-10\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:roleFilter,onChange:e=>setRoleFilter(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"\\u3059\\u3079\\u3066\\u306E\\u30ED\\u30FC\\u30EB\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u30B0\\u30ED\\u30FC\\u30D0\\u30EB\\u7BA1\\u7406\\u8005\",children:\"\\u30B0\\u30ED\\u30FC\\u30D0\\u30EB\\u7BA1\\u7406\\u8005\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u4E00\\u822C\\u30E6\\u30FC\\u30B6\\u30FC\",children:\"\\u4E00\\u822C\\u30E6\\u30FC\\u30B6\\u30FC\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u30B2\\u30B9\\u30C8\",children:\"\\u30B2\\u30B9\\u30C8\"})]}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:statusFilter,onChange:e=>setStatusFilter(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"\\u3059\\u3079\\u3066\\u306E\\u72B6\\u614B\"}),/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"\\u30A2\\u30AF\\u30C6\\u30A3\\u30D6\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactive\",children:\"\\u7121\\u52B9\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-secondary-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-secondary-50\",children:/*#__PURE__*/_jsx(\"tr\",{children:['氏名','メールアドレス','部署','ロール','状態','認証タイプ','アクション'].map((col,idx)=>/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider\",children:col},idx))})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-secondary-200\",children:filteredUsers.map(user=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-secondary-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium text-secondary-900\",children:[user.last_name,\" \",user.first_name]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-secondary-500\",children:user.email})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-secondary-500\",children:user.department})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(RoleBadge,{role:user.role})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${user.status==='アクティブ'?'bg-success-100 text-success-800':'bg-secondary-100 text-secondary-800'}`,children:user.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-secondary-500\",children:user.auth_type}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-secondary-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"text-primary-600 hover:text-primary-900\",title:\"\\u7DE8\\u96C6\",onClick:()=>setModalState({type:'edit',user}),children:/*#__PURE__*/_jsx(PencilIcon,{className:\"h-5 w-5\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"text-primary-600 hover:text-primary-900\",title:\"\\u6A29\\u9650\\u8A2D\\u5B9A\",onClick:()=>setModalState({type:'permissions',user}),children:/*#__PURE__*/_jsx(KeyIcon,{className:\"h-5 w-5\"})}),/*#__PURE__*/_jsx(\"button\",{className:`${user.status==='アクティブ'?'text-danger-600 hover:text-danger-900':'text-success-600 hover:text-success-900'}`,title:user.status==='アクティブ'?'無効化':'有効化',onClick:()=>toggleUserStatus(user.id),children:user.status==='アクティブ'?/*#__PURE__*/_jsx(XCircleIcon,{className:\"h-5 w-5\"}):/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-5 w-5\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"text-danger-600 hover:text-danger-900\",title:\"\\u524A\\u9664\",onClick:()=>setModalState({type:'delete',user}),children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-5 w-5\"})})]})})]},user.id))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-secondary-600\",children:[activeUsersCount,\" \\u4EBA\\u306E\\u30A2\\u30AF\\u30C6\\u30A3\\u30D6\\u30E6\\u30FC\\u30B6\\u30FC\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary flex items-center space-x-1\",onClick:()=>setModalState({type:'add',user:null}),children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-5 w-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u30E6\\u30FC\\u30B6\\u30FC\\u8FFD\\u52A0\"})]})]}),renderModal()]});};export default UserManagement;","map":{"version":3,"names":["React","useState","useEffect","UsersIcon","ArrowPathIcon","PlusIcon","PencilIcon","TrashIcon","CheckCircleIcon","XCircleIcon","UserPlusIcon","KeyIcon","useAuth","jsx","_jsx","jsxs","_jsxs","RoleBadge","_ref","role","color","className","children","UserFormModal","_ref2","user","onClose","onSubmit","currentUser","isEdit","formData","setFormData","first_name","last_name","email","department","auth_type","errors","setErrors","touched","setTouched","isGlobalAdmin","handleChange","e","name","value","target","prev","validateForm","newErrors","trim","Object","keys","length","handleBlur","updated","handleSubmit","preventDefault","allTouched","reduce","acc","key","id","Math","random","toString","substring","status","permissions","onClick","stopPropagation","noValidate","htmlFor","type","onChange","onBlur","required","PermissionsModal","_ref3","setPermissions","handlePermissionChange","perm","includes","filter","p","checked","DeleteConfirmModal","_ref4","onConfirm","UserManagement","users","setUsers","searchTerm","setSearchTerm","roleFilter","setRoleFilter","statusFilter","setStatusFilter","modalState","setModalState","filteredUsers","nameMatch","toLowerCase","roleMatch","statusMatch","handleUserSubmit","userData","map","u","handlePermissionsSave","handleDeleteUser","userId","toggleUserStatus","activeUsersCount","renderModal","xmlns","viewBox","fill","fillRule","d","clipRule","placeholder","col","idx","scope","title"],"sources":["F:/kitting/ITManagementSystem/frontend/src/pages/UserManagement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { \r\n  UsersIcon, \r\n  ArrowPathIcon, \r\n  PlusIcon,\r\n  PencilIcon,\r\n  TrashIcon,\r\n  CheckCircleIcon,\r\n  XCircleIcon,\r\n  UserPlusIcon,\r\n  KeyIcon\r\n} from '@heroicons/react/24/outline';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\n// ユーザーロールのバッジコンポーネント\r\nconst RoleBadge = ({ role }) => {\r\n  let color = 'bg-secondary-100 text-secondary-800';\r\n  \r\n  if (role === 'グローバル管理者') {\r\n    color = 'bg-danger-100 text-danger-800';\r\n  } else if (role === '一般ユーザー') {\r\n    color = 'bg-primary-100 text-primary-800';\r\n  } else if (role === 'ゲスト') {\r\n    color = 'bg-warning-100 text-warning-800';\r\n  }\r\n  \r\n  return (\r\n    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${color}`}>\r\n      {role}\r\n    </span>\r\n  );\r\n};\r\n\r\n// ユーザー追加/編集モーダル\r\nconst UserFormModal = ({ user, onClose, onSubmit }) => {\r\n  const { user: currentUser } = useAuth();\r\n  const isEdit = !!user;\r\n  const [formData, setFormData] = useState({\r\n    first_name: user?.first_name || '',\r\n    last_name: user?.last_name || '',\r\n    email: user?.email || '',\r\n    role: user?.role || '一般ユーザー',\r\n    department: user?.department || '',\r\n    auth_type: user?.auth_type || 'ローカル認証',\r\n  });\r\n  \r\n  const [errors, setErrors] = useState({});\r\n  const [touched, setTouched] = useState({});\r\n  \r\n  // 現在のユーザーがグローバル管理者かどうかを判定\r\n  const isGlobalAdmin = currentUser?.role === 'グローバル管理者';\r\n  \r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n    setTouched(prev => ({ ...prev, [name]: true }));\r\n  };\r\n  \r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    \r\n    // 必須項目のバリデーション\r\n    if (!formData.first_name.trim()) newErrors.first_name = '名を入力してください';\r\n    if (!formData.last_name.trim()) newErrors.last_name = '姓を入力してください';\r\n    if (!formData.email.trim()) newErrors.email = 'メールアドレスを入力してください';\r\n    if (!formData.department.trim()) newErrors.department = '部署を入力してください';\r\n    \r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n  \r\n  // 項目がフォーカスを失った時にバリデーションを実行\r\n  const handleBlur = (e) => {\r\n    const { name } = e.target;\r\n    setTouched(prev => ({ ...prev, [name]: true }));\r\n    \r\n    // 個別フィールドのバリデーション\r\n    if (name === 'first_name' && !formData.first_name.trim()) {\r\n      setErrors(prev => ({ ...prev, first_name: '名を入力してください' }));\r\n    } else if (name === 'last_name' && !formData.last_name.trim()) {\r\n      setErrors(prev => ({ ...prev, last_name: '姓を入力してください' }));\r\n    } else if (name === 'email' && !formData.email.trim()) {\r\n      setErrors(prev => ({ ...prev, email: 'メールアドレスを入力してください' }));\r\n    } else if (name === 'department' && !formData.department.trim()) {\r\n      setErrors(prev => ({ ...prev, department: '部署を入力してください' }));\r\n    } else {\r\n      // エラーをクリア\r\n      setErrors(prev => {\r\n        const updated = { ...prev };\r\n        delete updated[name];\r\n        return updated;\r\n      });\r\n    }\r\n  };\r\n  \r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    \r\n    // すべてのフィールドをタッチ済みとしてマーク\r\n    const allTouched = Object.keys(formData).reduce((acc, key) => {\r\n      acc[key] = true;\r\n      return acc;\r\n    }, {});\r\n    setTouched(allTouched);\r\n    \r\n    if (validateForm()) {\r\n      onSubmit({\r\n        id: user?.id || (Math.random().toString(36).substring(2, 15)),\r\n        ...formData,\r\n        status: user?.status || 'アクティブ',\r\n        permissions: user?.permissions || ['read'],\r\n      });\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"fixed inset-0 z-30 overflow-y-auto\">\r\n      <div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n        <div className=\"fixed inset-0 transition-opacity\" onClick={onClose}>\r\n          <div className=\"absolute inset-0 bg-secondary-900 opacity-50\"></div>\r\n        </div>\r\n\r\n        <span className=\"hidden sm:inline-block sm:align-middle sm:h-screen\">&#8203;</span>\r\n\r\n        <div \r\n          className=\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\"\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          <form onSubmit={handleSubmit} noValidate>\r\n            <div className=\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\r\n              <div className=\"mb-4\">\r\n                <h3 className=\"text-lg leading-6 font-medium text-secondary-900\">\r\n                  {isEdit ? 'ユーザー編集' : 'ユーザー追加'}\r\n                </h3>\r\n                <p className=\"mt-1 text-sm text-secondary-500\">\r\n                  {isEdit ? 'ユーザー情報を更新します' : '新しいユーザーを追加します'}\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label htmlFor=\"last_name\" className=\"block text-sm font-medium text-secondary-700\">\r\n                    姓 <span className=\"text-danger-600\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"last_name\"\r\n                    id=\"last_name\"\r\n                    value={formData.last_name}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    className={`mt-1 form-input block w-full ${touched.last_name && errors.last_name ? 'border-danger-500' : ''}`}\r\n                    required\r\n                  />\r\n                  {touched.last_name && errors.last_name && (\r\n                    <p className=\"mt-1 text-sm text-danger-600\">{errors.last_name}</p>\r\n                  )}\r\n                </div>\r\n                <div>\r\n                  <label htmlFor=\"first_name\" className=\"block text-sm font-medium text-secondary-700\">\r\n                    名 <span className=\"text-danger-600\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"first_name\"\r\n                    id=\"first_name\"\r\n                    value={formData.first_name}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    className={`mt-1 form-input block w-full ${touched.first_name && errors.first_name ? 'border-danger-500' : ''}`}\r\n                    required\r\n                  />\r\n                  {touched.first_name && errors.first_name && (\r\n                    <p className=\"mt-1 text-sm text-danger-600\">{errors.first_name}</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"mt-4\">\r\n                <label htmlFor=\"email\" className=\"block text-sm font-medium text-secondary-700\">\r\n                  メールアドレス <span className=\"text-danger-600\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  name=\"email\"\r\n                  id=\"email\"\r\n                  value={formData.email}\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  className={`mt-1 form-input block w-full ${touched.email && errors.email ? 'border-danger-500' : ''}`}\r\n                  required\r\n                />\r\n                {touched.email && errors.email && (\r\n                  <p className=\"mt-1 text-sm text-danger-600\">{errors.email}</p>\r\n                )}\r\n              </div>\r\n              \r\n              <div className=\"mt-4\">\r\n                <label htmlFor=\"department\" className=\"block text-sm font-medium text-secondary-700\">\r\n                  部署 <span className=\"text-danger-600\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"department\"\r\n                  id=\"department\"\r\n                  value={formData.department}\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  className={`mt-1 form-input block w-full ${touched.department && errors.department ? 'border-danger-500' : ''}`}\r\n                  required\r\n                />\r\n                {touched.department && errors.department && (\r\n                  <p className=\"mt-1 text-sm text-danger-600\">{errors.department}</p>\r\n                )}\r\n              </div>\r\n              \r\n              <div className=\"mt-4\">\r\n                <label htmlFor=\"role\" className=\"block text-sm font-medium text-secondary-700\">ロール</label>\r\n                <select\r\n                  name=\"role\"\r\n                  id=\"role\"\r\n                  value={formData.role}\r\n                  onChange={handleChange}\r\n                  className=\"mt-1 form-select block w-full\"\r\n                  required\r\n                >\r\n                  {/* 常に全てのロールオプションを表示 */}\r\n                  <option value=\"グローバル管理者\">グローバル管理者</option>\r\n                  <option value=\"一般ユーザー\">一般ユーザー</option>\r\n                  <option value=\"ゲスト\">ゲスト</option>\r\n                </select>\r\n              </div>\r\n              \r\n              <div className=\"mt-4\">\r\n                <label htmlFor=\"auth_type\" className=\"block text-sm font-medium text-secondary-700\">認証タイプ</label>\r\n                <select\r\n                  name=\"auth_type\"\r\n                  id=\"auth_type\"\r\n                  value={formData.auth_type}\r\n                  onChange={handleChange}\r\n                  className=\"mt-1 form-select block w-full\"\r\n                  required\r\n                >\r\n                  <option value=\"ローカル認証\">ローカル認証</option>\r\n                  <option value=\"シングルサインオン\">シングルサインオン</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"bg-secondary-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\">\r\n              <button\r\n                type=\"submit\"\r\n                className=\"btn btn-primary w-full sm:w-auto sm:ml-3\"\r\n              >\r\n                {isEdit ? '更新' : '追加'}\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn border border-secondary-300 bg-white text-secondary-700 hover:bg-secondary-50 mt-3 sm:mt-0 w-full sm:w-auto\"\r\n                onClick={onClose}\r\n              >\r\n                キャンセル\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// 権限設定モーダル\r\nconst PermissionsModal = ({ user, onClose, onSubmit }) => {\r\n  const [permissions, setPermissions] = useState(user.permissions || []);\r\n  \r\n  const handlePermissionChange = (perm) => {\r\n    if (permissions.includes(perm)) {\r\n      setPermissions(permissions.filter(p => p !== perm));\r\n    } else {\r\n      setPermissions([...permissions, perm]);\r\n    }\r\n  };\r\n  \r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onSubmit({ ...user, permissions });\r\n  };\r\n  \r\n  return (\r\n    <div className=\"fixed inset-0 z-30 overflow-y-auto\">\r\n      <div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n        <div className=\"fixed inset-0 transition-opacity\" onClick={onClose}>\r\n          <div className=\"absolute inset-0 bg-secondary-900 opacity-50\"></div>\r\n        </div>\r\n\r\n        <span className=\"hidden sm:inline-block sm:align-middle sm:h-screen\">&#8203;</span>\r\n\r\n        <div \r\n          className=\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\"\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\r\n              <div className=\"mb-4\">\r\n                <h3 className=\"text-lg leading-6 font-medium text-secondary-900\">\r\n                  権限設定\r\n                </h3>\r\n                <p className=\"mt-1 text-sm text-secondary-500\">\r\n                  {`${user.last_name} ${user.first_name}`}の権限を設定します\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex items-center justify-between p-3 border border-secondary-200 rounded-md\">\r\n                  <div>\r\n                    <h4 className=\"text-sm font-medium text-secondary-900\">管理権限</h4>\r\n                    <p className=\"text-xs text-secondary-500\">すべての管理機能へのアクセス</p>\r\n                  </div>\r\n                  <div className=\"flex items-center\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      id=\"admin\"\r\n                      checked={permissions.includes('admin')}\r\n                      onChange={() => handlePermissionChange('admin')}\r\n                      className=\"form-checkbox h-4 w-4 text-primary-600\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center justify-between p-3 border border-secondary-200 rounded-md\">\r\n                  <div>\r\n                    <h4 className=\"text-sm font-medium text-secondary-900\">読み取り権限</h4>\r\n                    <p className=\"text-xs text-secondary-500\">ダッシュボードと情報の閲覧</p>\r\n                  </div>\r\n                  <div className=\"flex items-center\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      id=\"read\"\r\n                      checked={permissions.includes('read')}\r\n                      onChange={() => handlePermissionChange('read')}\r\n                      className=\"form-checkbox h-4 w-4 text-primary-600\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center justify-between p-3 border border-secondary-200 rounded-md\">\r\n                  <div>\r\n                    <h4 className=\"text-sm font-medium text-secondary-900\">書き込み権限</h4>\r\n                    <p className=\"text-xs text-secondary-500\">データの更新と変更</p>\r\n                  </div>\r\n                  <div className=\"flex items-center\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      id=\"write\"\r\n                      checked={permissions.includes('write')}\r\n                      onChange={() => handlePermissionChange('write')}\r\n                      className=\"form-checkbox h-4 w-4 text-primary-600\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center justify-between p-3 border border-secondary-200 rounded-md\">\r\n                  <div>\r\n                    <h4 className=\"text-sm font-medium text-secondary-900\">API管理権限</h4>\r\n                    <p className=\"text-xs text-secondary-500\">APIパーミッション管理機能へのアクセス</p>\r\n                  </div>\r\n                  <div className=\"flex items-center\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      id=\"api_management\"\r\n                      checked={permissions.includes('api_management')}\r\n                      onChange={() => handlePermissionChange('api_management')}\r\n                      className=\"form-checkbox h-4 w-4 text-primary-600\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"bg-secondary-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\">\r\n              <button\r\n                type=\"submit\"\r\n                className=\"btn btn-primary w-full sm:w-auto sm:ml-3\"\r\n              >\r\n                保存\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn border border-secondary-300 bg-white text-secondary-700 hover:bg-secondary-50 mt-3 sm:mt-0 w-full sm:w-auto\"\r\n                onClick={onClose}\r\n              >\r\n                キャンセル\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// 削除確認モーダル\r\nconst DeleteConfirmModal = ({ user, onClose, onConfirm }) => {\r\n  return (\r\n    <div className=\"fixed inset-0 z-30 overflow-y-auto\">\r\n      <div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n        <div className=\"fixed inset-0 transition-opacity\" onClick={onClose}>\r\n          <div className=\"absolute inset-0 bg-secondary-900 opacity-50\"></div>\r\n        </div>\r\n\r\n        <span className=\"hidden sm:inline-block sm:align-middle sm:h-screen\">&#8203;</span>\r\n\r\n        <div \r\n          className=\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\"\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          <div className=\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\r\n            <div className=\"sm:flex sm:items-start\">\r\n              <div className=\"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-danger-100 sm:mx-0 sm:h-10 sm:w-10\">\r\n                <TrashIcon className=\"h-6 w-6 text-danger-600\" />\r\n              </div>\r\n              <div className=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left\">\r\n                <h3 className=\"text-lg leading-6 font-medium text-secondary-900\">\r\n                  ユーザーの削除\r\n                </h3>\r\n                <div className=\"mt-2\">\r\n                  <p className=\"text-sm text-secondary-500\">\r\n                    {`${user.last_name} ${user.first_name} を削除してもよろしいですか？この操作は取り消せません。`}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-secondary-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-danger w-full sm:w-auto sm:ml-3\"\r\n              onClick={() => onConfirm(user.id)}\r\n            >\r\n              削除\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn border border-secondary-300 bg-white text-secondary-700 hover:bg-secondary-50 mt-3 sm:mt-0 w-full sm:w-auto\"\r\n              onClick={onClose}\r\n            >\r\n              キャンセル\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst UserManagement = () => {\r\n  // AuthContextからユーザーロールを取得\r\n  const { user: currentUser } = useAuth();\r\n  \r\n  // モックユーザー一覧（実際のアプリではAPIから取得します）\r\n  const [users, setUsers] = useState([\r\n    {\r\n      id: '1',\r\n      first_name: '太郎',\r\n      last_name: '山田',\r\n      email: 'taro.yamada@example.com',\r\n      role: 'グローバル管理者',\r\n      department: 'IT部門',\r\n      permissions: ['admin', 'read', 'write', 'api_management'],\r\n      status: 'アクティブ',\r\n      auth_type: 'ローカル認証'\r\n    },\r\n    {\r\n      id: '2',\r\n      first_name: '一郎',\r\n      last_name: '鈴木',\r\n      email: 'ichiro.suzuki@example.com',\r\n      role: '一般ユーザー',\r\n      department: 'IT部門',\r\n      permissions: ['read', 'write'],\r\n      status: 'アクティブ',\r\n      auth_type: 'シングルサインオン'\r\n    },\r\n    {\r\n      id: '3',\r\n      first_name: '次郎',\r\n      last_name: '佐藤',\r\n      email: 'jiro.sato@example.com',\r\n      role: 'ゲスト',\r\n      department: '営業部',\r\n      permissions: ['read'],\r\n      status: 'アクティブ',\r\n      auth_type: 'ローカル認証'\r\n    },\r\n    {\r\n      id: '4',\r\n      first_name: '花子',\r\n      last_name: '田中',\r\n      email: 'hanako.tanaka@example.com',\r\n      role: '一般ユーザー',\r\n      department: '総務部',\r\n      permissions: ['read', 'write'],\r\n      status: '無効',\r\n      auth_type: 'シングルサインオン'\r\n    }\r\n  ]);\r\n  \r\n  // 検索とフィルタリング\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [roleFilter, setRoleFilter] = useState('all');\r\n  const [statusFilter, setStatusFilter] = useState('all');\r\n  \r\n  // モーダル状態管理\r\n  const [modalState, setModalState] = useState({\r\n    type: null, // 'add', 'edit', 'delete', 'permissions'\r\n    user: null\r\n  });\r\n  \r\n  // フィルタリング適用\r\n  const filteredUsers = users.filter(user => {\r\n    const nameMatch = `${user.last_name}${user.first_name}${user.email}`.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const roleMatch = roleFilter === 'all' || user.role === roleFilter;\r\n    const statusMatch = statusFilter === 'all' || \r\n                      (statusFilter === 'active' && user.status === 'アクティブ') ||\r\n                      (statusFilter === 'inactive' && user.status === '無効');\r\n    \r\n    return nameMatch && roleMatch && statusMatch;\r\n  });\r\n  // ユーザー追加/編集の処理\r\n  const handleUserSubmit = (userData) => {\r\n    if (modalState.type === 'add') {\r\n      setUsers([...users, userData]);\r\n    } else if (modalState.type === 'edit') {\r\n      setUsers(users.map(u => u.id === userData.id ? userData : u));\r\n    }\r\n    setModalState({ type: null, user: null });\r\n  };\r\n  \r\n  // 権限設定の保存処理\r\n  const handlePermissionsSave = (userData) => {\r\n    setUsers(users.map(u => u.id === userData.id ? userData : u));\r\n    setModalState({ type: null, user: null });\r\n  };\r\n  \r\n  // ユーザー削除の処理\r\n  const handleDeleteUser = (userId) => {\r\n    setUsers(users.filter(u => u.id !== userId));\r\n    setModalState({ type: null, user: null });\r\n  };\r\n  \r\n  // ユーザー状態の切り替え\r\n  const toggleUserStatus = (userId) => {\r\n    setUsers(users.map(u => {\r\n      if (u.id === userId) {\r\n        return {\r\n          ...u,\r\n          status: u.status === 'アクティブ' ? '無効' : 'アクティブ'\r\n        };\r\n      }\r\n      return u;\r\n    }));\r\n  };\r\n  \r\n  // アクティブユーザー数を計算\r\n  const activeUsersCount = users.filter(user => user.status === 'アクティブ').length;\r\n  \r\n  // 現在のユーザーがグローバル管理者かどうか\r\n  const isGlobalAdmin = currentUser?.role === 'グローバル管理者';\r\n  \r\n  // モーダルの表示\r\n  const renderModal = () => {\r\n    if (!modalState.type) return null;\r\n    \r\n    switch (modalState.type) {\r\n      case 'add':\r\n        return (\r\n          <UserFormModal\r\n            onClose={() => setModalState({ type: null, user: null })}\r\n            onSubmit={handleUserSubmit}\r\n          />\r\n        );\r\n      case 'edit':\r\n        return (\r\n          <UserFormModal\r\n            user={modalState.user}\r\n            onClose={() => setModalState({ type: null, user: null })}\r\n            onSubmit={handleUserSubmit}\r\n          />\r\n        );\r\n      case 'permissions':\r\n        return (\r\n          <PermissionsModal\r\n            user={modalState.user}\r\n            onClose={() => setModalState({ type: null, user: null })}\r\n            onSubmit={handlePermissionsSave}\r\n          />\r\n        );\r\n      case 'delete':\r\n        return (\r\n          <DeleteConfirmModal\r\n            user={modalState.user}\r\n            onClose={() => setModalState({ type: null, user: null })}\r\n            onConfirm={handleDeleteUser}\r\n          />\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"space-y-6 animate-fade-in\">\r\n      {/* ヘッダー */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-2xl font-bold text-secondary-900\">ローカルユーザー管理</h1>\r\n        <div className=\"flex items-center text-primary-600\">\r\n          <ArrowPathIcon className=\"h-5 w-5 mr-2\" />\r\n          <span className=\"text-sm\">最終更新: 2025/03/13 18:25</span>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* 検索とフィルター */}\r\n      <div className=\"flex flex-col md:flex-row md:items-center md:justify-between space-y-2 md:space-y-0\">\r\n        <div className=\"flex-1 max-w-lg\">\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n              <svg className=\"h-5 w-5 text-secondary-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                <path fillRule=\"evenodd\" d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\" clipRule=\"evenodd\" />\r\n              </svg>\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"ユーザーを検索...\"\r\n              className=\"form-input pl-10\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n            />\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex space-x-2\">\r\n          <select \r\n            className=\"form-select\"\r\n            value={roleFilter}\r\n            onChange={(e) => setRoleFilter(e.target.value)}\r\n          >\r\n            <option value=\"all\">すべてのロール</option>\r\n            <option value=\"グローバル管理者\">グローバル管理者</option>\r\n            <option value=\"一般ユーザー\">一般ユーザー</option>\r\n            <option value=\"ゲスト\">ゲスト</option>\r\n          </select>\r\n          \r\n          <select \r\n            className=\"form-select\"\r\n            value={statusFilter}\r\n            onChange={(e) => setStatusFilter(e.target.value)}\r\n          >\r\n            <option value=\"all\">すべての状態</option>\r\n            <option value=\"active\">アクティブ</option>\r\n            <option value=\"inactive\">無効</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* ユーザー情報テーブル */}\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"min-w-full divide-y divide-secondary-200\">\r\n          <thead className=\"bg-secondary-50\">\r\n            <tr>\r\n              {['氏名', 'メールアドレス', '部署', 'ロール', '状態', '認証タイプ', 'アクション'].map((col, idx) => (\r\n                <th\r\n                  key={idx}\r\n                  scope=\"col\"\r\n                  className=\"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider\"\r\n                >\r\n                  {col}\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"bg-white divide-y divide-secondary-200\">\r\n            {filteredUsers.map(user => (\r\n              <tr key={user.id} className=\"hover:bg-secondary-50\">\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                  <div className=\"font-medium text-secondary-900\">\r\n                    {user.last_name} {user.first_name}\r\n                  </div>\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                  <div className=\"text-sm text-secondary-500\">{user.email}</div>\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                  <div className=\"text-sm text-secondary-500\">{user.department}</div>\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                  <RoleBadge role={user.role} />\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                  <span\r\n                    className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n                      user.status === 'アクティブ'\r\n                        ? 'bg-success-100 text-success-800'\r\n                        : 'bg-secondary-100 text-secondary-800'\r\n                    }`}\r\n                  >\r\n                    {user.status}\r\n                  </span>\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-secondary-500\">\r\n                  {user.auth_type}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-secondary-500\">\r\n                  <div className=\"flex space-x-2\">\r\n                    <button\r\n                      className=\"text-primary-600 hover:text-primary-900\"\r\n                      title=\"編集\"\r\n                      onClick={() => setModalState({ type: 'edit', user })}\r\n                    >\r\n                      <PencilIcon className=\"h-5 w-5\" />\r\n                    </button>\r\n                    <button\r\n                      className=\"text-primary-600 hover:text-primary-900\"\r\n                      title=\"権限設定\"\r\n                      onClick={() => setModalState({ type: 'permissions', user })}\r\n                    >\r\n                      <KeyIcon className=\"h-5 w-5\" />\r\n                    </button>\r\n                    <button\r\n                      className={`${\r\n                        user.status === 'アクティブ' ? 'text-danger-600 hover:text-danger-900' : 'text-success-600 hover:text-success-900'\r\n                      }`}\r\n                      title={user.status === 'アクティブ' ? '無効化' : '有効化'}\r\n                      onClick={() => toggleUserStatus(user.id)}\r\n                    >\r\n                      {user.status === 'アクティブ' ? (\r\n                        <XCircleIcon className=\"h-5 w-5\" />\r\n                      ) : (\r\n                        <CheckCircleIcon className=\"h-5 w-5\" />\r\n                      )}\r\n                    </button>\r\n                    <button\r\n                      className=\"text-danger-600 hover:text-danger-900\"\r\n                      title=\"削除\"\r\n                      onClick={() => setModalState({ type: 'delete', user })}\r\n                    >\r\n                      <TrashIcon className=\"h-5 w-5\" />\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      \r\n      {/* アクション領域 */}\r\n      <div className=\"flex justify-between items-center\">\r\n        <div className=\"text-sm text-secondary-600\">\r\n          {activeUsersCount} 人のアクティブユーザー\r\n        </div>\r\n        <button\r\n          className=\"btn btn-primary flex items-center space-x-1\"\r\n          onClick={() => setModalState({ type: 'add', user: null })}\r\n        >\r\n          <PlusIcon className=\"h-5 w-5\" />\r\n          <span>ユーザー追加</span>\r\n        </button>\r\n      </div>\r\n      \r\n      {/* モーダル表示 */}\r\n      {renderModal()}\r\n    </div>\r\n  );\r\n  \r\n};\r\n\r\nexport default UserManagement;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}