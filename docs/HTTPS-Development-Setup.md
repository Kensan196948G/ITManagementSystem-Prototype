# HTTP開発環境セットアップガイド

## 背景と問題点

Microsoft認証では、リダイレクトURIの完全一致が要求されます。Azure Portalに設定されているリダイレクトURI `http://localhost:5000/auth/callback` と実際のアプリケーション実行環境を一致させる必要があります。

接続拒否エラー「localhost 接続が拒否されました」が発生する原因は、アプリケーションが通常HTTPS（ポート5000）で実行されているのに対し、リダイレクトURIがHTTP（ポート3000）を指定しているためです。

## 解決方法

この問題を解決するため、以下の手順で開発環境をHTTPで実行します。

### 1. 証明書生成スクリプトの無効化

```bash
cd frontend
npm run disable-https
```

このコマンドは以下を実行します：
- HTTPS関連の環境変数を無効化
- 証明書生成スクリプトの実行をスキップ

### 2. HTTP開発サーバーの起動

```bash
cd frontend
npm run start
```

このコマンドは開発サーバーをHTTPモードで起動します。

## 詳細情報

### 環境変数

`.env.development` ファイルに以下の設定があります：

```
HTTPS=false
PORT=5000
```

これにより、開発サーバーが以下の設定で起動します：
- HTTPプロトコル使用
- ポート5000で起動

### 注意事項

1. **セキュリティ設定**: 開発環境ではHTTPを使用しますが、本番環境では必ずHTTPSを有効にしてください。

3. **リダイレクトURI**: リダイレクトURIが `http://localhost:5000/auth/callback` に設定されていることを確認してください。
